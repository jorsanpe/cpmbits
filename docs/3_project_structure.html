<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CPM Bits</title>
  <link rel="stylesheet" href="css/cpmbits.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="css/prism.css" rel="stylesheet">
  <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
  <script src="js/prism.js"></script>
</head>

<body>

  <nav class="navbar has-shadow is-light" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://cpmbits.com">
                <img src="img/cpmbits-logo.png" height="28">
            </a>

            <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>

        <div id="navbar-links" class="navbar-menu">
            <div class="navbar-start">
                
                <a class="navbar-item " href="1_getting_started.html">
                    Documentation
                </a>
                
                <a class="navbar-item " href="#">
                    Browse
                </a>
                
                <a class="navbar-item " href="#">
                    Blog
                </a>
                
            </div>

            <div class="navbar-end">
                <div class="navbar-item">
                    <div class="buttons">
                        <a class="button is-light" href="https://github.com/jorsanpe/cpm" target="_blank">
                            <img src="img/GitHub-Mark-32px.png" height="28">
                        </a>
                        <a class="button is-primary" title="User registration only with inviation" disabled>
                            <strong>Sign up</strong>
                        </a>
                        <a class="button is-light">
                            Log in
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>

  <section class="section">
    <div class="container">
      <div class="columns">
        <div class="column is-one-fifth has-background-white-bis">
          <aside class="menu">
    <p class="menu-label">
        Documentation
    </p>
    <ul class="menu-list">
        
        <li><a href="1_getting_started.html" class="">
            1 Getting Started
        </a></li>
        
        <li><a href="2_project_descriptor.html" class="">
            2 Project Descriptor
        </a></li>
        
        <li><a href="3_project_structure.html" class="is-active">
            3 Project Structure
        </a></li>
        
        <li><a href="4_command_line.html" class="">
            4 Command Line
        </a></li>
        
        <li><a href="5_what_is_cpm.html" class="">
            5 What Is Cpm
        </a></li>
        
    </ul>
</aside>
        </div>
        <div class="column content">
          <p>This section describes how CPM projects are managed. When in doubt, please refer to <a href="https://github.com/jorsanpe/cpm-hub">CPM Hub</a> for reference, as CPM Hub is based on CPM.</p>
<p>CPM projects are structured as follows:</p>
<pre><code>Project/
    main.cpp
    project.yaml
    package/
        code.cpp
        code.h
    tests/
        test_suite.cpp
    bits/
        cest/
            bit.yaml
            cest/
                cest.h</code></pre>
<h3 class="subtitle is-4" id="project.yaml"><code>project.yaml</code></h3>
<p>The project description is stored in this file following the <a href="cpm-project-schema">CPM project schema</a>. This file contains the description of the project, the packages that compose the source code, the <code>bits</code> it depends on and the rules for specific targets.</p>
<h3 class="subtitle is-4" id="main.cpp"><code>main.cpp</code></h3>
<p>The <code>main.cpp</code> file contains the <code>main</code> function of the application. This file is required to exist in the project root directory and contain the implementation of the <code>main</code> function.</p>
<h2 class="subtitle is-3" id="packages">Packages</h2>
<p>Packages allow the user to structure the code however needed. By design, we’re removing the <code>src &lt;-&gt; include</code> separation. Instead, source code and header files are stored next to each other, creating a proper structure for packages. A <em>package</em> in CPM is the root of a set of source files with no particular structure. The package sources are found recursively from the package root.</p>
<p>Using packages is pretty straightforward. First, package your code however you require:</p>
<pre><code>Project/
    api/
        api.cpp
        api.h</code></pre>
<p>Second, declare the packages in <code>project.yaml</code>:</p>
<pre><code>project_name: cpm-hub
description: CPM Hub open source server for hosting CPM software
packages:
  api:
    cflags: [ -std=c++11 ]</code></pre>
<p>Each entry in <code>packages</code> is the path to the package, followed by a dictionary of properties for that package. This section is under development so, for now, only the <code>cflags</code> property is implemented. The <code>cflags</code> property allows the developer to specify compilation flags for each package. The properties defined to the package will be applied to all the source files of the package.</p>
<p>Once the package has been created, the parent path of the package will be included with ‘-I’ flag. This way, a package like the one declared above can be used in the code with:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode c"><code class="sourceCode c"><a class="sourceLine" id="cb4-1" title="1"><span class="pp">#include </span><span class="im">&lt;api/api.h&gt;</span></a></code></pre></div>
<h2 class="subtitle is-3" id="bits">Bits</h2>
<p>CPM <code>bits</code> are the main way of sharing code between CPM projects. All bits are installed under the <code>bits</code> directory. That directory should not be included as part of the project VCS, as it’s automatically managed by <code>cpm</code>.</p>
<h2 class="subtitle is-3" id="tests">Tests</h2>
<p>When testing, CPM will find for files matching the <code>test_*.cpp</code> pattern and will consider them as test suites. Each test suite will be compiled separately as a binary application and run. CPM leaves the choice of the testing framework to the developer.</p>
<p>CPM is developed jointly with CPM Hub, which is both the bits repository and the first CPM project. In turn, CPM Hub is using <a href="https://github.com/cegonse/cest">Cest</a>, so there’s good synergy between them.</p>

        </div>
    </div>
  </section>

  <footer class="footer">
    <div class="columns is-mobile">
        <div class="column is-offset-2">
            <div class="content has-text-centered">
                <p><strong>cpm</strong> by Jordi Sánchez.</p>
            </div>
        </div>
        <div class="column">
            <a href="https://bulma.io">
                <img src="https://bulma.io/images/made-with-bulma.png" alt="Made with Bulma" width="128" height="24">
            </a>
        </div>
    </div>
</footer>

</body>

</html>